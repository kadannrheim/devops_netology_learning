# ПРАВА ДОСТУПА К ФАЙЛАМ В LINUX

- Чтение - разрешает получать содержимое файла, но на запись нет. Для каталога позволяет получить список файлов и каталогов, расположенных в нем;
- Запись - разрешает записывать новые данные в файл или изменять существующие, а также позволяет создавать и изменять файлы и каталоги;
- Выполнение - вы не можете выполнить программу, если у нее нет флага выполнения. Этот атрибут устанавливается для всех программ и скриптов, именно с помощью него система может понять, что этот файл нужно запускать как программу.

- Владелец - набор прав для владельца файла, пользователя, который его создал или сейчас установлен его владельцем. Обычно владелец имеет все права, чтение, запись и выполнение.
- Группа - любая группа пользователей, существующая в системе и привязанная к файлу. Но это может быть только одна группа и обычно это группа владельца, хотя для файла можно назначить и другую группу.
- Остальные - все пользователи, кроме владельца и пользователей, входящих в группу файла.

- SUID - если этот бит установлен, то при выполнении программы, id пользователя, от которого она запущена заменяется на id владельца файла. Фактически, это позволяет обычным пользователям запускать программы от имени суперпользователя;
- SGID - этот флаг работает аналогичным образом, только разница в том, что пользователь считается членом группы, с которой связан файл, а не групп, к которым он действительно принадлежит. Если SGID флаг установлен на каталог, все файлы, созданные в нем, будут связаны с группой каталога, а не пользователя. Такое поведение используется для организации общих папок;
- Sticky-bit - этот бит тоже используется для создания общих папок. Если он установлен, то пользователи могут только создавать, читать и выполнять файлы, но не могут удалять файлы, принадлежащие другим пользователям.

- --- - нет прав, совсем;
- --x - разрешено только выполнение файла, как программы но не изменение и не чтение;
- -w- - разрешена только запись и изменение файла;
- -wx - разрешено изменение и выполнение, но в случае с каталогом, вы не можете посмотреть его содержимое;
- r-- - права только на чтение;
- r-x - только чтение и выполнение, без права на запись;
- rw- - права на чтение и запись, но без выполнения;
- rwx - все права;
- --s - установлен SUID или SGID бит, первый отображается в поле для владельца, второй для группы;
- --t - установлен sticky-bit, а значит пользователи не могут удалить этот файл.

## Изменение прав

$ chmod опции категориядействиефлаг файл

- u - владелец файла;
- g - группа файла;
- o - другие пользователи.

- r - чтение;
- w - запись;
- x - выполнение;
- s - выполнение  от имени суперпользователя (дополнительный);

- 0 - никаких прав;
- 1 - только выполнение;
- 2 - только запись;
- 3 - выполнение и запись;
- 4 -  только чтение;
- 5 - чтение и выполнение;
- 6 - чтение и запись;
- 7 - чтение запись и выполнение.

- 1 - выполнение;
- 2 - запись;
- 4 - чтение;

остальные - производные от их сумм
- 3 - (1+2) выполнение + запись;
- 5 - (1+4) выполнение + чтение;
- 6 - (2+4) запись + чтение ;
- 7 - (1+2+4) выполнение + запись + чтение .


  
Пример:
ugo
744 - разрешить все для владельца, а остальным только чтение;
755 - все для владельца, остальным только чтение и выполнение;
764 - все для владельца, чтение и запись для группы, и только чтение для остальных;
777 - всем разрешено все.

- Действие может быть одно из двух, либо добавить - знак "+", либо убрать - знак - "-". Что касается самих прав доступа, то они аналогичны выводу утилиты ls: r - чтение, w - запись, x - выполнение, s - suid/sgid, в зависимости от категории, для которой вы его устанавливаете, t - устанавливает sticky-bit. 
- Например, всем пользователям полный доступ к файлу test5:
`chmod ugo+rwx test5`

- Или заберем все права у группы и остальных пользователей:
`chmod go-rwx test5`

- Дадим группе право на чтение и выполнение:
`chmod g+rx test5`

- Остальным пользователям только чтение:
`chmod o+r test5`

- Для файла test6 установим SUID:
`chmod u+s test6`

- А для test7 - SGID:
`chmod g+s test7`

## Опции.
` chmod опции права /путь/к/файлу`
- -c - выводить информацию обо всех изменениях;
- -f - не выводить сообщения об ошибках;
- -v - выводить максимум информации;
- --preserve-root - не выполнять рекурсивные операции для корня "/";
- --reference - взять маску прав из указанного файла;
- -R - включить поддержку рекурсии;
- --version - вывести версию утилиты;

Для того чтобы поменять права на все файлы в папке используйте опцию -R:
`chmod -R ug+rw dir`

Также вы можете смотреть подробную информацию про вносимые изменения, например:
`chmod -Rv ug+rw dir`